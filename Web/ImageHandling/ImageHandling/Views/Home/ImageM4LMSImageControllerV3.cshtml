@{
	ViewData["Title"] = "Serverside Controller V3 android Hack + Client script + NoScript + Rsize - Image Large Medium Small";
}

<script>
	document.addEventListener("DOMContentLoaded", () => {
		function getDeviceType() {
			const width = window.innerWidth;
			if (width < 768) return "mobile";
			if (width < 1024) return "tablet";
			return "desktop";
		}
		 function updateImages() {
			const type = getDeviceType();
			document.querySelectorAll(".responsive-img").forEach(img => {
				const imageName = img.dataset.name;
				const newSrc = `/responsive-imageV3/${imageName}?size=${type}`;
				if (img.src !== location.origin + newSrc) {
					img.src = newSrc;
				}
			});
		}

		// Initial image load
		updateImages();

		// Debounce resize to avoid flooding with events
		let resizeTimeout;
		window.addEventListener("resize", () => {
			clearTimeout(resizeTimeout);
			resizeTimeout = setTimeout(updateImages, 200);
		});
	});
</script>

<div class="container mt-5">
	<h2>Server Controller V3 android hack + Client Script + Noscript + resize - Large Medium Small</h2>

	With Resize after load ! <br />
	<img class="responsive-img" data-name="image.jpeg" />
	<noscript>
		<img src="/responsive-imageV3/image.jpeg" />
	<</noscript>
</div>